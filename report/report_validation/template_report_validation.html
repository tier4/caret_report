<!-- prettier-ignore -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css"
    />
    <title>{{ title }}</title>
  </head>

  <body>
    <div class="container">
      <h1>{{ title }}</h1>
      <h3>Trace name: {{ trace_name }}</h3>

      {% if note_text_top %} {{ note_text_top | safe }} {% endif %}

      <ul>
        <li>Result Summary</li>
        <ul>
          <li>
            Topic: {{ summary_topic_dict["cnt_pass"] }} / {{ summary_topic_dict["cnt_pass"] + summary_topic_dict["cnt_failed"] }}
          </li>
          <li>
            Callback: {{ summary_callback_dict["cnt_pass"] }} / {{ summary_callback_dict["cnt_pass"] + summary_callback_dict["cnt_failed"] }}
          </li>
        </ul>
      </ul>

      <div id="cy" style="height: 600px;"></div>
      <hr />

      <h3>Component Latency</h3>
      <iframe id="track_path" src="track_path/index.html" frameborder="0" width="100%" scrolling="no"></iframe>
      <hr />

      {% if note_text_bottom %} {{ note_text_bottom | safe }} {% endif %}

    </div><!-- container -->

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"
      integrity="sha512-gEWKnYYa1/1c3jOuT9PR7NxiVI1bwn02DeJGsl+lMVQ1fWMNvtjkjxIApTdbJ/wcDjQmbf+McWahXwipdC9bGA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script type="text/javascript">
      let summary_callback_dict_component_metrics = {{ summary_callback_dict_component_metrics | tojson }};
      let summary_topic_dict_component_pair_metrics = {{ summary_topic_dict_component_pair_metrics | tojson }};
    </script>
    <script src="index.js"></script>
    <script type="text/javascript">
      window.addEventListener('message', function(e) {
        var eventName = e.data[0];
        var data = e.data[1];
        switch(eventName) {
          case 'setHeightTrackPath':
            var iframe = document.getElementById("track_path");
            iframe.style.height = data + "px";
            break;
          }
      }, false);
    </script>
  </body>
</html>
